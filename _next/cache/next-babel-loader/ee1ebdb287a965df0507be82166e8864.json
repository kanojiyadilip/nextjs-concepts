{"ast":null,"code":"// Next.js API route support: https://nextjs.org/docs/api-routes/introduction\nvar fs = require('fs');\n\nvar path = require('path');\n\nexport default ((req, res) => {\n  api().then(data => {\n    // console.log(\"data=====================>\", data);\n    fs.writeFile(process.cwd() + \"/public/html/static.html\", resData, function (err, result) {\n      if (err) {\n        return console.log(err);\n      }\n\n      res.statusCode = 200;\n      res.json({\n        resule: result,\n        msg: 'The file was saved!'\n      });\n    });\n  }, err => {\n    console.log(\"err==========err===========>\", err); // Deal with the fact the chain failed\n  });\n}); // export default (async(req, res) => {\n//   let result = await api();\n//   console.log(\"API=====================>\", result);\n//   res.statusCode = 200\n//   res.json({result: result, name: 'John Doe' })\n// })\n\nasync function api() {\n  // console.log(\"res============>\", res);\n  const resHtml = await fetch('http://localhost:3000/posts', {\n    method: 'get',\n    headers: {\n      'Content-Type': 'text/html\"'\n    }\n  });\n  const resData = await resHtml.text();\n  console.log(\"resData========>\", `${process.cwd()}/public/html/`);\n  return resData;\n  fs.writeFile(process.cwd() + \"/public/html/static.html\", resData, function (err, result) {\n    if (err) {\n      return console.log(err);\n    }\n\n    console.log(\"result=====================>\", result);\n    return \"The file was saved!\"; // res.statusCode = 200\n    // res.json({ name: 'John Doe' })\n    // console.log(\"The file was saved!\");\n  }); // res.statusCode = 200\n  // res.json({ name: 'John Doe' })\n}","map":{"version":3,"sources":["D:/reactJS/next-js/pages/api/hello.js"],"names":["fs","require","path","req","res","api","then","data","writeFile","process","cwd","resData","err","result","console","log","statusCode","json","resule","msg","resHtml","fetch","method","headers","text"],"mappings":"AAAA;AACA,IAAIA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAhB;;AACA,IAAIC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAAlB;;AAGA,gBAAe,CAACE,GAAD,EAAMC,GAAN,KAAc;AAE3BC,EAAAA,GAAG,GAAGC,IAAN,CACEC,IAAI,IAAI;AACN;AACAP,IAAAA,EAAE,CAACQ,SAAH,CAAaC,OAAO,CAACC,GAAR,KAAc,0BAA3B,EAAuDC,OAAvD,EAAgE,UAASC,GAAT,EAAcC,MAAd,EAAsB;AACpF,UAAGD,GAAH,EAAQ;AACJ,eAAOE,OAAO,CAACC,GAAR,CAAYH,GAAZ,CAAP;AACH;;AACDR,MAAAA,GAAG,CAACY,UAAJ,GAAiB,GAAjB;AACAZ,MAAAA,GAAG,CAACa,IAAJ,CAAS;AAACC,QAAAA,MAAM,EAAEL,MAAT;AAAiBM,QAAAA,GAAG,EAAE;AAAtB,OAAT;AACD,KAND;AAOD,GAVH,EAWEP,GAAG,IAAI;AACLE,IAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ,EAA4CH,GAA5C,EADK,CAEH;AACH,GAdH;AAiBD,CAnBD,E,CAqBA;AACA;AACA;AACA;AACA;AACA;;AAGA,eAAeP,GAAf,GAAqB;AACnB;AACA,QAAMe,OAAO,GAAG,MAAMC,KAAK,CAAC,6BAAD,EAA+B;AAACC,IAAAA,MAAM,EAAE,KAAT;AAAgBC,IAAAA,OAAO,EAAE;AAAC,sBAAe;AAAhB;AAAzB,GAA/B,CAA3B;AACA,QAAMZ,OAAO,GAAG,MAAMS,OAAO,CAACI,IAAR,EAAtB;AACAV,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAiC,GAAEN,OAAO,CAACC,GAAR,EAAc,eAAjD;AACA,SAAOC,OAAP;AAEAX,EAAAA,EAAE,CAACQ,SAAH,CAAaC,OAAO,CAACC,GAAR,KAAc,0BAA3B,EAAuDC,OAAvD,EAAgE,UAASC,GAAT,EAAcC,MAAd,EAAsB;AACpF,QAAGD,GAAH,EAAQ;AACJ,aAAOE,OAAO,CAACC,GAAR,CAAYH,GAAZ,CAAP;AACH;;AACDE,IAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ,EAA4CF,MAA5C;AACA,WAAO,qBAAP,CALoF,CAMpF;AACA;AACA;AACD,GATD,EAPmB,CAiBnB;AACA;AACD","sourcesContent":["// Next.js API route support: https://nextjs.org/docs/api-routes/introduction\nvar fs = require('fs');\nvar path = require('path');\n\n\nexport default (req, res) => {\n\n  api().then(\n    data => {\n      // console.log(\"data=====================>\", data);\n      fs.writeFile(process.cwd()+\"/public/html/static.html\", resData, function(err, result) {\n        if(err) {\n            return console.log(err);\n        }\n        res.statusCode = 200\n        res.json({resule: result, msg: 'The file was saved!' })\n      }); \n    },\n    err => {\n      console.log(\"err==========err===========>\", err);\n        // Deal with the fact the chain failed\n    }\n  );\n\n}\n\n// export default (async(req, res) => {\n//   let result = await api();\n//   console.log(\"API=====================>\", result);\n//   res.statusCode = 200\n//   res.json({result: result, name: 'John Doe' })\n// })\n\n\nasync function api() {\n  // console.log(\"res============>\", res);\n  const resHtml = await fetch('http://localhost:3000/posts',{method: 'get', headers: {'Content-Type':'text/html\"'}});\n  const resData = await resHtml.text();\n  console.log(\"resData========>\", `${process.cwd()}/public/html/`);\n  return resData;\n\n  fs.writeFile(process.cwd()+\"/public/html/static.html\", resData, function(err, result) {\n    if(err) {\n        return console.log(err);\n    }\n    console.log(\"result=====================>\", result);\n    return \"The file was saved!\";\n    // res.statusCode = 200\n    // res.json({ name: 'John Doe' })\n    // console.log(\"The file was saved!\");\n  }); \n  // res.statusCode = 200\n  // res.json({ name: 'John Doe' })\n}"]},"metadata":{},"sourceType":"module"}