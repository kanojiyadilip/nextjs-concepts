{"ast":null,"code":"// Next.js API route support: https://nextjs.org/docs/api-routes/introduction\nvar fs = require('fs');\n\nvar beautify = require('js-beautify').html;\n\nexport default ((req, res) => {\n  api().then(data => {\n    fs.writeFile(process.cwd() + \"/public/html/static.html\", beautify(data, {\n      indent_size: 2,\n      space_in_empty_paren: true\n    }), function (err, result) {\n      if (err) {\n        return console.log(err);\n      }\n\n      res.statusCode = 200;\n      res.json({\n        statusCode: 200,\n        msg: 'The file was saved!'\n      });\n    });\n  }, err => {\n    console.log(\"err==========err===========>\", err); // Deal with the fact the chain failed\n  });\n});\n\nasync function api() {\n  const resHtml = await fetch('http://localhost:3000/posts/1', {\n    method: 'get',\n    headers: {\n      'Content-Type': 'text/html\"'\n    }\n  });\n  const resData = await resHtml.text();\n  console.log(\"resData========>\", `${process.cwd()}/public/html/`);\n  return resData;\n}","map":{"version":3,"sources":["D:/reactJS/next-js/pages/api/hello.js"],"names":["fs","require","beautify","html","req","res","api","then","data","writeFile","process","cwd","indent_size","space_in_empty_paren","err","result","console","log","statusCode","json","msg","resHtml","fetch","method","headers","resData","text"],"mappings":"AAAA;AACA,IAAIA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAhB;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,aAAD,CAAP,CAAuBE,IAAtC;;AAGA,gBAAe,CAACC,GAAD,EAAMC,GAAN,KAAc;AAE3BC,EAAAA,GAAG,GAAGC,IAAN,CACEC,IAAI,IAAI;AACNR,IAAAA,EAAE,CAACS,SAAH,CAAaC,OAAO,CAACC,GAAR,KAAc,0BAA3B,EAAuDT,QAAQ,CAACM,IAAD,EAAO;AAAEI,MAAAA,WAAW,EAAE,CAAf;AAAkBC,MAAAA,oBAAoB,EAAE;AAAxC,KAAP,CAA/D,EAAuH,UAASC,GAAT,EAAcC,MAAd,EAAsB;AAC3I,UAAGD,GAAH,EAAQ;AACJ,eAAOE,OAAO,CAACC,GAAR,CAAYH,GAAZ,CAAP;AACH;;AACDT,MAAAA,GAAG,CAACa,UAAJ,GAAiB,GAAjB;AACAb,MAAAA,GAAG,CAACc,IAAJ,CAAS;AAACD,QAAAA,UAAU,EAAE,GAAb;AAAkBE,QAAAA,GAAG,EAAE;AAAvB,OAAT;AACD,KAND;AAOD,GATH,EAUEN,GAAG,IAAI;AACLE,IAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ,EAA4CH,GAA5C,EADK,CAEH;AACH,GAbH;AAgBD,CAlBD;;AAoBA,eAAeR,GAAf,GAAqB;AACnB,QAAMe,OAAO,GAAG,MAAMC,KAAK,CAAC,+BAAD,EAAiC;AAACC,IAAAA,MAAM,EAAE,KAAT;AAAgBC,IAAAA,OAAO,EAAE;AAAC,sBAAe;AAAhB;AAAzB,GAAjC,CAA3B;AACA,QAAMC,OAAO,GAAG,MAAMJ,OAAO,CAACK,IAAR,EAAtB;AACAV,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAiC,GAAEP,OAAO,CAACC,GAAR,EAAc,eAAjD;AACA,SAAOc,OAAP;AACD","sourcesContent":["// Next.js API route support: https://nextjs.org/docs/api-routes/introduction\nvar fs = require('fs');\nvar beautify = require('js-beautify').html\n\n\nexport default (req, res) => {\n\n  api().then(\n    data => {\n      fs.writeFile(process.cwd()+\"/public/html/static.html\", beautify(data, { indent_size: 2, space_in_empty_paren: true }), function(err, result) {\n        if(err) {\n            return console.log(err);\n        }\n        res.statusCode = 200\n        res.json({statusCode: 200, msg: 'The file was saved!' })\n      }); \n    },\n    err => {\n      console.log(\"err==========err===========>\", err);\n        // Deal with the fact the chain failed\n    }\n  );\n\n}\n\nasync function api() {\n  const resHtml = await fetch('http://localhost:3000/posts/1',{method: 'get', headers: {'Content-Type':'text/html\"'}});\n  const resData = await resHtml.text();\n  console.log(\"resData========>\", `${process.cwd()}/public/html/`);\n  return resData;\n}"]},"metadata":{},"sourceType":"module"}