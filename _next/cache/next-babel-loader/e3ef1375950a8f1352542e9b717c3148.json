{"ast":null,"code":"// Next.js API route support: https://nextjs.org/docs/api-routes/introduction\nvar fs = require('fs');\n\nvar beautify = require('js-beautify').html;\n\nexport default ((req, res) => {\n  console.log(\"req.method ==========>\", req.method);\n\n  if (req.method == 'POST') {\n    api().then(data => {\n      fs.writeFile(process.cwd() + \"/public/html/static.html\", beautify(data, {\n        indent_size: 2,\n        space_in_empty_paren: true\n      }), function (err, result) {\n        if (err) {\n          return console.log(err);\n        }\n\n        res.statusCode = 200;\n        res.json({\n          statusCode: 200,\n          msg: 'The file was saved!'\n        });\n      });\n    }, err => {\n      console.log(\"err==========err===========>\", err); // Deal with the fact the chain failed\n    });\n  } else {\n    // res.statusCode = 200\n    res.status(500).json({\n      statusCode: 500,\n      msg: 'method is post'\n    });\n  }\n});\n\nasync function api() {\n  const resHtml = await fetch('http://localhost:3000/posts', {\n    method: 'get',\n    headers: {\n      'Content-Type': 'text/html\"'\n    }\n  });\n  const resData = await resHtml.text();\n  console.log(\"resData========>\", `${process.cwd()}/public/html/`);\n  return resData;\n} // export default (async(req, res) => {\n//   let result = await api();\n//   console.log(\"API=====================>\", result);\n//   res.statusCode = 200\n//   res.json({result: result, name: 'John Doe' })\n// })","map":{"version":3,"sources":["D:/reactJS/next-js/pages/api/hello.js"],"names":["fs","require","beautify","html","req","res","console","log","method","api","then","data","writeFile","process","cwd","indent_size","space_in_empty_paren","err","result","statusCode","json","msg","status","resHtml","fetch","headers","resData","text"],"mappings":"AAAA;AACA,IAAIA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAhB;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,aAAD,CAAP,CAAuBE,IAAtC;;AAGA,gBAAe,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC3BC,EAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCH,GAAG,CAACI,MAA1C;;AACA,MAAGJ,GAAG,CAACI,MAAJ,IAAc,MAAjB,EAAwB;AACxBC,IAAAA,GAAG,GAAGC,IAAN,CACEC,IAAI,IAAI;AACNX,MAAAA,EAAE,CAACY,SAAH,CAAaC,OAAO,CAACC,GAAR,KAAc,0BAA3B,EAAuDZ,QAAQ,CAACS,IAAD,EAAO;AAAEI,QAAAA,WAAW,EAAE,CAAf;AAAkBC,QAAAA,oBAAoB,EAAE;AAAxC,OAAP,CAA/D,EAAuH,UAASC,GAAT,EAAcC,MAAd,EAAsB;AAC3I,YAAGD,GAAH,EAAQ;AACJ,iBAAOX,OAAO,CAACC,GAAR,CAAYU,GAAZ,CAAP;AACH;;AACDZ,QAAAA,GAAG,CAACc,UAAJ,GAAiB,GAAjB;AACAd,QAAAA,GAAG,CAACe,IAAJ,CAAS;AAACD,UAAAA,UAAU,EAAE,GAAb;AAAkBE,UAAAA,GAAG,EAAE;AAAvB,SAAT;AACD,OAND;AAOD,KATH,EAUEJ,GAAG,IAAI;AACLX,MAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ,EAA4CU,GAA5C,EADK,CAEH;AACH,KAbH;AAeC,GAhBD,MAiBI;AACF;AACAZ,IAAAA,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBF,IAAhB,CAAqB;AAACD,MAAAA,UAAU,EAAE,GAAb;AAAkBE,MAAAA,GAAG,EAAE;AAAvB,KAArB;AACD;AAEF,CAxBD;;AA0BA,eAAeZ,GAAf,GAAqB;AACnB,QAAMc,OAAO,GAAG,MAAMC,KAAK,CAAC,6BAAD,EAA+B;AAAChB,IAAAA,MAAM,EAAE,KAAT;AAAgBiB,IAAAA,OAAO,EAAE;AAAC,sBAAe;AAAhB;AAAzB,GAA/B,CAA3B;AACA,QAAMC,OAAO,GAAG,MAAMH,OAAO,CAACI,IAAR,EAAtB;AACArB,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAiC,GAAEM,OAAO,CAACC,GAAR,EAAc,eAAjD;AACA,SAAOY,OAAP;AACD,C,CAED;AACA;AACA;AACA;AACA;AACA","sourcesContent":["// Next.js API route support: https://nextjs.org/docs/api-routes/introduction\nvar fs = require('fs');\nvar beautify = require('js-beautify').html\n\n\nexport default (req, res) => {\n  console.log(\"req.method ==========>\", req.method );\n  if(req.method == 'POST'){\n  api().then(\n    data => {\n      fs.writeFile(process.cwd()+\"/public/html/static.html\", beautify(data, { indent_size: 2, space_in_empty_paren: true }), function(err, result) {\n        if(err) {\n            return console.log(err);\n        }\n        res.statusCode = 200\n        res.json({statusCode: 200, msg: 'The file was saved!' })\n      }); \n    },\n    err => {\n      console.log(\"err==========err===========>\", err);\n        // Deal with the fact the chain failed\n    }\n  );\n  }\n  else{\n    // res.statusCode = 200\n    res.status(500).json({statusCode: 500, msg: 'method is post' })\n  }\n\n}\n\nasync function api() {\n  const resHtml = await fetch('http://localhost:3000/posts',{method: 'get', headers: {'Content-Type':'text/html\"'}});\n  const resData = await resHtml.text();\n  console.log(\"resData========>\", `${process.cwd()}/public/html/`);\n  return resData;\n}\n\n// export default (async(req, res) => {\n//   let result = await api();\n//   console.log(\"API=====================>\", result);\n//   res.statusCode = 200\n//   res.json({result: result, name: 'John Doe' })\n// })"]},"metadata":{},"sourceType":"module"}